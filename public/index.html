<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanilla AI Lab</title>

    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
          rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
          rel="stylesheet"/>

    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/main-content.css">
    <link rel="stylesheet" href="./css/sidebar-left.css">
    <link rel="stylesheet" href="./css/sidebar-right.css">
    <link rel="stylesheet" href="./css/collections-page.css">
    <link rel="stylesheet" href="./css/rag-chat.css">
    <link rel="stylesheet" href="./css/footer.css">
</head>
<body class="theme-mint">
<div class="app">
    <!-- Layout -->
    <div class="layout">
        <!-- Left Sidebar -->
        <aside class="sidebar-left">
            <header class="sidebar-left-header">
                <div class="sidebar-left-logo">
                    <span class="material-symbols-outlined">biotech</span>
                </div>
                <div class="sidebar-left-title">
                    <h3>AI LAB</h3>
                    <h5>Research Workspace</h5>
                </div>
            </header>

            <nav class="sidebar-left-nav">
                <a href="#" data-page="home" class="active">
                    <span class="material-symbols-outlined">home</span>
                    <span>Home</span>
                </a>
                <a href="#" data-page="dashboard">
                    <span class="material-symbols-outlined">dashboard</span>
                    <span>Dashboard</span>
                </a>
                <a href="#" data-page="rag">
                    <span class="material-symbols-outlined">chat</span>
                    <span>RAG Chat</span>
                </a>
                <a href="#" data-page="collections">
                    <span class="material-symbols-outlined">inventory_2</span>
                    <span>Collections</span>
                </a>
            </nav>

            <div class="sidebar-left-footer">
                <button class="sidebar-left-footer-btn">
                    <span class="material-symbols-outlined">settings</span>
                    <span>Settings</span>
                </button>
                <button class="sidebar-left-collapse-btn">
                    <span class="material-symbols-outlined">side_navigation</span>
                    <span>Collapse</span>
                </button>
            </div>
        </aside>

        <!-- Page Content -->
        <main class="main-content">

            <!-- Home Page -->
            <section class="page-home" data-page="home">
                <span class="badge">
                    <span class="material-symbols-outlined">auto_awesome</span>
                    <span>New Beta Features Available</span>
                </span>
                <h1 class="main-heading">
                    Welcome to the <br/><span class="main-heading-accent">AI Research Lab</span>
                </h1>
                <p>Design, test, and deploy your next-generation neural networks
                    in a unified environment with high-performance compute clusters
                    at your fingertips.</p>
                <div class="btn-group">
                    <button id="helloBtn" class="btn-primary">
                        Call Orchestrator
                    </button>
                    <button class="btn-secondary">Documentation</button>
                </div>
                <p id="output"></p>
            </section>

            <!-- Collections Page -->
            <section class="page-collections hidden" data-page="collections">
                <div class="collections-header">
                    <div>
                        <h1>Collections</h1>
                        <p>Manage your document collections and their contents.</p>
                    </div>
                    <button class="collections-create-btn" id="collectionsCreateBtn">
                        <span class="material-symbols-outlined">add</span>
                        New Collection
                    </button>
                </div>

                <table class="collections-table">
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th>Documents</th>
                        <th>Created</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody id="collectionsTableBody"></tbody>
                    <tfoot>
                    <tr class="collections-create-row hidden" id="collectionsCreateRow">
                        <td colspan="4">
                            <div class="collections-create-field">
                                <input id="collectionsCreateInput"
                                       type="text"
                                       placeholder="Collection name"
                                       maxlength="128">
                                <button class="collections-create-confirm" id="collectionsCreateConfirm">
                                    <span class="material-symbols-outlined">check</span>
                                </button>
                                <button class="collections-create-cancel" id="collectionsCreateCancel">
                                    <span class="material-symbols-outlined">close</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                    </tfoot>
                </table>

                <!-- Collections Empty State -->
                <div class="collections-empty-state hidden" id="collectionsEmptyState">
                    <span class="material-symbols-outlined">folder_off</span>
                    <p>No collections yet. Create one to start uploading documents.</p>
                </div>
            </section>

            <!-- Dashboard Page -->
            <section class="page-dashboard hidden" data-page="dashboard">
                <h1>Dashboard</h1>
                <p>Embedding statistics and system metrics will live here.</p>
            </section>

            <!-- RAG Chat Page -->
            <section class="page-rag hidden" data-page="rag">
                <div class="rag-header">
                    <h1>RAG Chat</h1>
                    <p>Query your document collections using semantic search.</p>
                </div>

                <!-- Stats Row -->
                <div class="rag-stats-row hidden" id="ragStatsRow">
                    <div class="rag-stat-card">
                        <div class="rag-stat-icon">
                            <span class="material-symbols-outlined">description</span>
                        </div>
                        <div class="rag-stat-body">
                            <span class="rag-stat-value" id="ragStatDocuments">0</span>
                            <span class="rag-stat-label">Documents</span>
                        </div>
                    </div>
                    <div class="rag-stat-card">
                        <div class="rag-stat-icon">
                            <span class="material-symbols-outlined">segment</span>
                        </div>
                        <div class="rag-stat-body">
                            <span class="rag-stat-value" id="ragStatChunks">0</span>
                            <span class="rag-stat-label">Chunks</span>
                        </div>
                    </div>
                    <div class="rag-stat-card">
                        <div class="rag-stat-icon">
                            <span class="material-symbols-outlined">hub</span>
                        </div>
                        <div class="rag-stat-body">
                            <span class="rag-stat-value" id="ragStatEmbeds">0</span>
                            <span class="rag-stat-label">Embeddings</span>
                        </div>
                    </div>
                </div>

                <!-- No Collection State -->
                <div class="rag-no-collection" id="ragNoCollection">
                    <span class="material-symbols-outlined">folder_off</span>
                    <p>Select or create a collection in the sidebar to start chatting with your documents.</p>
                </div>

                <!-- Chat Container -->
                <div class="rag-chat-container hidden" id="ragChatContainer">
                    <div class="rag-chat-messages" id="ragChatMessages">
                        <!-- Empty state inside the chat -->
                        <div class="rag-chat-empty">
                            <span class="material-symbols-outlined">chat_bubble</span>
                            <p>Ask a question about your documents. The assistant will search the knowledge base and cite its sources.</p>
                        </div>
                    </div>

                    <div class="rag-input-bar">
                        <div class="rag-input-wrapper">
                            <textarea
                                    id="ragInput"
                                    class="rag-textarea"
                                    placeholder="Ask something about your documentsâ€¦"
                                    rows="1"
                                    maxlength="2000"
                            ></textarea>
                        </div>
                        <button class="rag-send-btn" id="ragSendBtn" disabled>
                            <span class="material-symbols-outlined">send</span>
                        </button>
                    </div>
                </div>
            </section>

        </main>

        <!-- Right Sidebar -->
        <aside class="sidebar-right">
            <div class="sidebar-right-header">
                <h3>Collections</h3>
                <button class="sidebar-right-collapse-btn">
                    <span class="material-symbols-outlined">side_navigation</span>
                </button>
            </div>

            <!-- Collection Empty State -->
            <div class="collection-empty-state" id="collectionEmptyState">
                <span class="material-symbols-outlined collection-empty-icon">folder_off</span>
                <p class="collection-empty-text">Create your first collection to start uploading documents.</p>
                <button class="collection-create-btn" id="createCollectionBtn">
                    <span class="material-symbols-outlined">add</span>
                    Create Collection
                </button>
            </div>

            <!-- Create Collection Input -->
            <div class="collection-create-input" id="collectionCreateInput">
                <label class="collection-create-label">Collection name</label>
                <div class="collection-create-field">
                    <input id="collectionNameInput" type="text" placeholder="e.g. Car Manuals" maxlength="128">
                    <button class="collection-create-confirm" id="confirmCollectionBtn">
                        <span class="material-symbols-outlined">check</span>
                    </button>
                    <button class="collection-create-cancel" id="cancelCollectionBtn">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
            </div>

            <!-- Collection Selector -->
            <button class="collection-selector hidden" id="collectionSelectorBtn">
                <div class="collection-selector-info">
                    <span class="material-symbols-outlined collection-selector-icon">folder_special</span>
                    <div class="collection-selector-text">
                        <span class="collection-selector-name"></span>
                        <span class="collection-selector-count">0 documents</span>
                    </div>
                </div>
                <span class="material-symbols-outlined collection-selector-chevron">expand_more</span>
            </button>

            <!-- Collection Dropdown -->
            <ul class="collection-dropdown" id="collectionDropdownList"></ul>

            <button class="uploadFileBtn hidden" id="uploadFileBtn">
                <span class="material-symbols-outlined">upload_file</span>
                Upload File
            </button>
            <input id="fileUpload" type="file" multiple accept=".pdf" hidden="hidden">

            <!-- Documents Empty State -->
            <p class="document-empty-text hidden" id="documentEmptyText">
                Upload your first document to this collection.
            </p>

            <!-- Document List -->
            <ol class="document-list" id="documentList"></ol>
        </aside>
    </div>

    <footer class="app-footer">
        <div class="footer-status">
            <span class="status-dot"></span>
            <span>System Online</span>
        </div>
        <span class="footer-version">v0.1.0-Stable</span>
    </footer>
</div>

<script type="module" src="./js/ui-orchestrator.js"></script>
</body>
</html>